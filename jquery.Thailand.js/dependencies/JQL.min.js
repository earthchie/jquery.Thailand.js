 /**
  * @name JQL.js
  * @version 1.0.3
  * @update Apr 16, 2017
  * @author Earthchie http://www.earthchie.com/
  * @license WTFPL v.2 - http://www.wtfpl.net/
  **/
 function JQL(a){"string"==typeof a&&(a=JSON.parse(a)),this.data_source=a,this.buffer=a,this.focused_field="",this.options=[],this.size=!1;for(const b in a){for(const c in a[b])this.options.push(c);break}this.fetch=function(){if("object"==typeof this.options){const b={};for(var a in this.buffer){b[a]={};for(const c in this.options){const d=this.options[c];this.buffer[a][d]&&(b[a][d]=this.buffer[a][d])}}this.buffer=b}if(this.size){const b=this.size.toString().split(",");let c=0,d=this.size;b.length>1&&b[0]<b[1]&&(c=parseInt(b[0]),d=c+parseInt(b[1]));const e={};for(var a=c;a<d&&this.buffer[a];a++)e[a]=this.buffer[a];this.buffer=e}return this.buffer},this.new=function(a){this.data_source=a,this.buffer=a},this.limit=function(a){return this.size=a,this},this.select=function(a){return this.options=a,"string"==typeof a&&"*"!==a&&(this.options=a.split(",")),this.buffer=this.data_source,this.size=!1,this},this.where=function(a){return this.focused_field=a,this},this.contains=function(a,b){const c=this.buffer;this.buffer=[];for(const d in c)b?~c[d][this.focused_field].indexOf(a)&&this.buffer.push(c[d]):~c[d][this.focused_field].toLowerCase().indexOf(a.toLowerCase())&&this.buffer.push(c[d]);return this},this.match=function(a,b){if("string"==typeof a&&""!==a){b=b||"ig",a=new RegExp(a,b);const c=this.buffer;this.buffer=[];for(const b in c)a.lastIndex=0,a.exec(c[b][this.focused_field])&&this.buffer.push(c[b])}return this},this.equalTo=function(a){const b=this.buffer;this.buffer=[];for(const c in b)b[c][this.focused_field]==a&&this.buffer.push(b[c]);return this},this.in=function(a){const b=this.buffer;this.buffer=[];for(const c in b)this.in_array(b[c][this.focused_field],a)&&this.buffer.push(b[c]);return this},this.moreThan=function(a){const b=this.buffer;this.buffer=[];for(const c in b)parseFloat(b[c][this.focused_field])>parseFloat(a)&&this.buffer.push(b[c]);return this},this.moreThanOrEqualTo=function(a){const b=this.buffer;this.buffer=[];for(const c in b)parseFloat(b[c][this.focused_field])>=parseFloat(a)&&this.buffer.push(b[c]);return this},this.lessThan=function(a){const b=this.buffer;this.buffer=[];for(const c in b)parseFloat(b[c][this.focused_field])<parseFloat(a)&&this.buffer.push(b[c]);return this},this.lessThanOrEqualTo=function(a){const b=this.buffer;this.buffer=[];for(const c in b)parseFloat(b[c][this.focused_field])<=parseFloat(a)&&this.buffer.push(b[c]);return this},this.orderBy=function(a,b){let c="asc";const d=a.split(" "),e=d.pop();e&&"desc"==e.toLowerCase()&&(c="desc",a=d.join(" "));const f=[];for(var g in this.buffer)f.push([g,this.buffer[g][a]]);if(f.length<2)return this;b=void 0==b&&isNaN(f[0][1])?"string":"numeric","string"==b?f.sort((a,b)=>{if(a[1]<b[1])return-1;if(a[1]>b[1])return 1;return 0}):f.sort((a,b)=>a[1]-b[1]),results=[];for(var g in f)results.push(this.buffer[f[g][0]]);return this.buffer=results,"desc"==c&&(this.buffer=this.buffer.reverse()),this},this.and=this.where,this.is=this.equalTo,this.in_array=function(a,b){for(const c in b)if(a==b[c])return!0;return!1}}